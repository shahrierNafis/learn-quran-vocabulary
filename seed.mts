import { createSeedClient } from "@snaplet/seed";
import herf from "./.seed-data/herf.json";
import ism_fill from "./.seed-data/ism+fiil.json";
import affix from "./.seed-data/affix.json";

// You can use @snaplet/copycat to generate fake data for a field, for example:
// ```
// await seed.users([{ email: ({ seed }) => copycat.email(seed) }])
// ```
// More on this in our docs: https://docs.snaplet.dev/core-concepts/seed#inside-the-snapletseed-workflow
import { copycat } from "@snaplet/copycat";

// This is a basic example generated by Snaplet to start you off, check out the docs for where to go from here
// * For more on getting started with @snaplet/seed: https://docs.snaplet.dev/getting-started/quick-start/seed
// * For a more detailed reference: https://docs.snaplet.dev/core-concepts/seed

const seed = await createSeedClient({
  dryRun: process.env.DRY !== "0",
});

// Clears all existing data in the database, but keep the structure
if (process.env.RESET) await seed.$resetDatabase();

// This will create 3 records in the HttpResponses table
// it reads HttpResponses times(x) 3
await seed.collections([
  {
    id: 1,
    name: "ism & Fiʻl",
    isDefault: true,
    description:
      "Collection of word groups where word groups are words that are similar in a way that learning one of them can be considered as learning the whole word group, this collection in particular is for all the nouns (ism) and verbs (fiʻl) in the Quran grouped by their spelling.",
  },
  {
    id: 2,
    name: "Ḩarf",
    isDefault: true,
    description: `In Arabic grammar, "Harf" ( حرف ) refers to words that function like particles in English. These words don't have inherent meaning on their own, but they establish context and relationships between other words in a sentence. So they are grouped by their spelling and their meaning.`,
  },
  {
    id: 3,
    name: "Affix",
    isDefault: true,
    description: `In this collection words are grouped by affixes, it could be hard to understand what affix the group is grouped by, since Arabic words can have multiple affixes at the same time, it is highly recommended to use the "show similar words" button to get a better understanding how affixes affect the meaning of the word.`,
  },
]);
await seed.wordGroups([
  ...ism_fill.map((wordGroup) => {
    return { words: wordGroup, collectionId: 1 };
  }),
  ...herf.map((wordGroup) => {
    return { words: wordGroup, collectionId: 2 };
  }),

  ...affix.map((wordGroup) => {
    return { words: wordGroup, collectionId: 3 };
  }),
]);

// Run it with: DRY=0 npx tsx seed.mts
